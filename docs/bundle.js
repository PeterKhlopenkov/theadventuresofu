!function(e,n){for(var t in n)e[t]=n[t]}(this,function(e){var n={};function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createForest=function(e){e.innerHTML="&blk12;",e.classList.add("forest")},n.createRoad=function(e){e.innerHTML="▓",e.classList.add("road")},n.createGrassland=function(e){e.innerHTML="&blk14;",e.classList.add("grassland")},n.createInn=function(e){e.innerHTML="I",e.classList.add("inn")},n.createCarpenter=function(e){e.innerHTML="C",e.classList.add("carpenter")},n.createGeneralStore=function(e){e.innerHTML="G",e.classList.add("generalStore")}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.cheatFunction=function(){i.wood+=1e4,i.planks+=1e4,i.coin+=1e4,g()};var a=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(t(0));var r={x:0,y:0},o={min_x:-1,max_x:1,min_y:-1,max_y:1},i={wood:0,planks:0,coin:5,hatchet:null,pickaxe:null},d="&blk14;",c=[[!0]],l=[[{x:0,y:0}]];function s(e){if(r.x>=o.max_x||r.y>=o.max_y){for(var n=r.y-e;n<=r.y+e;n++)for(var t=r.x-e;t<=r.x+e;t++)if(!(n===r.y-e&&t===r.x-e||n===r.y-e&&t===r.x+e||n===r.y+e&&t===r.x-e||n===r.y+e&&t===r.x+e)){(n<o.min_y||o.max_y<n)&&u(n),(t<o.min_x||o.max_x<t)&&p(t);var a=document.getElementById("mapCell"+t+","+n);"&nbsp;"===a.innerHTML&&m(a,t,n)}}else for(var i=r.y+e;i>=r.y-e;i--)for(var d=r.x+e;d>=r.x-e;d--)if(!(i===r.y-e&&d===r.x-e||i===r.y-e&&d===r.x+e||i===r.y+e&&d===r.x-e||i===r.y+e&&d===r.x+e)){(i<o.min_y||o.max_y<i)&&u(i),(d<o.min_x||o.max_x<d)&&p(d);var c=document.getElementById("mapCell"+d+","+i);"&nbsp;"===c.innerHTML&&m(c,d,i)}}function u(e){for(var n=document.getElementById("map"),t='<tr id="mapRow'+e+'">',a=o.min_x;a<=o.max_x;a++)t+='<td class="mapCell" id="mapCell'+a+","+e+'">&nbsp;</td>',f(a,e);t+="</tr>",e<o.min_y?(o.min_y=e,n.insertAdjacentHTML("beforeend",t)):e>o.max_y&&(o.max_y=e,n.insertAdjacentHTML("afterbegin",t))}function p(e){for(var n=o.min_y;n<=o.max_y;n++){var t='<td class="mapCell" id="mapCell'+e+","+n+'">&nbsp;</td>';f(e,n);var a=document.getElementById("mapRow"+n);e<=o.min_x?(o.min_x=e,a.insertAdjacentHTML("afterbegin",t)):e>=o.max_x&&(o.max_x=e,a.insertAdjacentHTML("beforeend",t))}}function m(e,n,t){var r=function(e,n,t){for(var a={grassland:0,forest:0,total:0,percentage_grassland:0,percentage_forest:0,road_point:!1},r=t-2;r<=t+2;r++)for(var o=n-2;o<=n+2;o++){var i=document.getElementById("mapCell"+o+","+r);null!==i&&("░"===i.innerHTML?(a.grassland++,a.total++):"▒"===i.innerHTML&&(a.forest++,a.total++));var d=l[Math.floor((o+20)/40)];d&&(d=d[Math.floor((r+20)/40)]),!a.road_point&&d&&d.x===o&&d.y===r&&(a.road_point=!0)}return a.percentage_grassland=a.grassland/a.total,a.percentage_forest=a.forest/a.total,a}(0,n,t),o=Math.random();void 0!==c[n]&&!0===c[n][t]?a.createRoad(e):r.road_point&&Math.random()<.2?o<.33?a.createInn(e):o<.66?a.createCarpenter(e):a.createGeneralStore(e):function(e,n,t){for(var a=0,r=n-1;r<=n+1;r+=2)void 0!==c[r]&&!0===c[r][t]&&a++;for(var o=t-1;o<=t+1;o+=2)void 0!==c[n]&&!0===c[n][o]&&a++;return a}(0,n,t)>1&&Math.random()<.02||(o<.96*r.percentage_grassland+.02?a.createGrassland(e):a.createForest(e))}function f(e,n){var t={x:0,y:0};t.x=Math.floor((e+20)/40),t.y=Math.floor((n+20)/40);for(var a=t.x-1;a<=t.x+1;a++)for(var r=t.y-1;r<=t.y+1;r++)l[a]||(l[a]=[]),l[a][r]||(l[a][r]=y(a,r),v(a,r))}function y(e,n){var t={x:_(40*e-20,40*e+20),y:_(40*n-20,40*n+20)};return console.log("new road point, x: "+t.x+" y:"+t.y),t}function v(e,n){for(var t=e-1;t<=e+1;t+=2)if(l[t]&&l[t][n]){var a=l[t][n].y-l[e][n].y,r=l[t][n].x-l[e][n].x,o=a/r,i=l[e][n].y,d=l[e][n].x;if(r>=0)for(;d<=r+l[e][n].x;)c[d]||(c[d]=[]),c[d][Math.round(i)]=!0,i+=o,d++;else for(;d>=r+l[e][n].x;)c[d]||(c[d]=[]),c[d][Math.round(i)]=!0,i-=o,d--}for(var s=n-1;s<=n+1;s+=2)if(l[e]&&l[e][s]){var u=l[e][s].y-l[e][n].y,p=(l[e][s].x-l[e][n].x)/u,m=l[e][n].y,f=l[e][n].x;if(u>=0)for(;m<=u+l[e][n].y;){var y=Math.round(f);c[y]||(c[y]=[]),c[y][m]=!0,f+=p,m++}else for(;m>=u+l[e][n].y;){var v=Math.round(f);c[v]||(c[v]=[]),c[v][m]=!0,f-=p,m--}}}function x(e){switch(d){case"▓":a.createRoad(e);break;case"▒":a.createForest(e);break;case"░":a.createGrassland(e);break;case"I":a.createInn(e);break;case"C":a.createCarpenter(e);break;case"G":a.createGeneralStore(e)}}function h(e){document.getElementById("output").innerHTML+="<p>You proceed "+e+".</p>";var n=document.getElementById("mapCell"+r.x+","+r.y);x(n);var t=1;switch("▓"===d&&(t+=1),e){case"north":r.y+=t;break;case"south":r.y-=t;break;case"east":r.x+=t;break;case"west":r.x-=t}M(),s(2),L(),function e(){var n=document.getElementById("location");var t=document.getElementById("output");switch(d){case"▓":n.innerHTML="<p>Road</p>";break;case"▒":n.innerHTML="<p>Forest</p>",i.hatchet&&(n.innerHTML+='<p><button id="chopWoodButton">Chop Wood</button></p>',document.getElementById("chopWoodButton").addEventListener("click",function(){i.wood++,d="░",e(),g()}));break;case"░":n.innerHTML="<p>Grassland</p>";break;case"I":t.innerHTML+="<p>You reach an inn, game saved.</p>",n.innerHTML="<p>Inn</p>",function(){console.log("Attempting save..."),x(document.getElementById("mapCell"+r.x+","+r.y));var e=[];for(var n in l)for(var t in l[n])l[n][t].quadrantX=n,l[n][t].quadrantY=t,e.push(l[n][t]);var a=[];for(var d in c)for(var s in c[d])c[d][s]&&a.push({x:d,y:s});var u={map:document.getElementById("mapWrapper").innerHTML,playerPosition:r,mapVariables:o,roadMapObjectArray:a,roadQuadrantObjectArray:e,inventory:i};try{localStorage.setItem("save",JSON.stringify(u)),console.log("Save complete!")}catch(e){console.error(e)}L()}();break;case"C":if(t.innerHTML+="<p>You reach an carpenter.</p>",n.innerHTML="<p>Carpenter</p>",i.wood>1){n.innerHTML+='<p><button id="createPlankButton">Create Plank</button></p>';var a=document.getElementById("createPlankButton");a.addEventListener("click",function(){i.wood-=2,i.planks++,e(),g()})}break;case"G":t.innerHTML+="<p>You reach a general store.</p>",n.innerHTML="<p>General Store</p>",i.coin>=5&&(i.hatchet||(n.innerHTML+='<p><button id="buyStarterHatchetButton">Buy Hatchet</button></p>',document.getElementById("buyStarterHatchetButton").addEventListener("click",function(){i.coin-=5,i.hatchet="Starter",e(),g()})))}}(),window.scroll(n.offsetLeft-window.innerWidth/2,n.offsetTop-window.innerHeight/2)}function L(){var e=document.getElementById("mapCell"+r.x+","+r.y);d=e.innerHTML,e.innerHTML="&Uuml;",e.classList=["mapCell"]}function M(){document.getElementById("coordinates").innerHTML="<p>("+r.x+", "+r.y+")</p>"}function g(){var e=document.getElementById("inventory");e.innerHTML="<p>Inventory</p>",i.hatchet&&(e.innerHTML+="<p>"+i.hatchet+" Hatchet</p>"),i.shovel&&(e.innerHTML+="<p>"+i.shovel+" Shovel</p>"),i.coin>0&&(e.innerHTML+="<p>Coin x"+i.coin+"</p>"),i.wood>0&&(e.innerHTML+="<p>Wood x"+i.wood+"</p>"),i.planks>0&&(e.innerHTML+="<p>Plank x"+i.planks+"</p>")}function b(){r={x:0,y:0},o={min_x:-1,max_x:1,min_y:-1,max_y:1},i={wood:0,planks:0,coin:5,hatchet:void 0,shovel:void 0},d="&blk14;",c=[[!0]],l=[[{x:0,y:0}]],document.getElementById("mapWrapper").innerHTML='<table id="map">\n          <tr id="mapRow1">\n            <td class="mapCell road" id="mapCell-1,1">▓</td>\n            <td class="mapCell road" id="mapCell0,1">▓</td>\n            <td class="mapCell road" id="mapCell1,1">▓</td>\n          </tr>\n          <tr id="mapRow0">\n            <td class="mapCell road" id="mapCell-1,0">▓</td>\n            <td class="mapCell road" id="mapCell0,0">▓</td>\n            <td class="mapCell road" id="mapCell1,0">▓</td>\n          </tr>\n          <tr id="mapRow-1">\n            <td class="mapCell road" id="mapCell-1,-1">▓</td>\n            <td class="mapCell road" id="mapCell0,-1">▓</td>\n            <td class="mapCell road" id="mapCell1,-1">▓</td>\n          </tr>\n        </table>',g(),M(),s(2),L()}function _(e,n){return Math.floor(Math.random()*(n-e+1))+e}document.addEventListener("DOMContentLoaded",function(e){console.log("document loaded"),function(){console.log("Loading game...");try{var e=JSON.parse(localStorage.getItem("save"));if(console.log("Loading complete..."),void 0!==e){if(void 0!==e.playerPosition&&(r=e.playerPosition),void 0!==e.map&&(document.getElementById("mapWrapper").innerHTML=e.map),void 0!==e.roadMapObjectArray){var n=!0,t=!1,a=void 0;try{for(var d,s=e.roadMapObjectArray[Symbol.iterator]();!(n=(d=s.next()).done);n=!0){var u=d.value;void 0===c[u.x]&&(c[u.x]=[]),c[u.x][u.y]=!0}}catch(e){t=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(t)throw a}}}if(void 0!==e.roadQuadrantObjectArray){var p=!0,m=!1,f=void 0;try{for(var y,v=e.roadQuadrantObjectArray[Symbol.iterator]();!(p=(y=v.next()).done);p=!0){var x=y.value;void 0===l[x.quadrantX]&&(l[x.quadrantX]=[]),l[x.quadrantX][x.quadrantY]={x:x.x,y:x.y}}}catch(e){m=!0,f=e}finally{try{!p&&v.return&&v.return()}finally{if(m)throw f}}}return void 0!==e.mapVariables&&(o=e.mapVariables),void 0!==e.inventory&&(i=e.inventory),!0}return!1}catch(e){return console.error(e),!1}}()||b(),g(),M(),s(2),L(),document.getElementById("northButton").addEventListener("click",function(){h("north")}),document.getElementById("southButton").addEventListener("click",function(){h("south")}),document.getElementById("eastButton").addEventListener("click",function(){h("east")}),document.getElementById("westButton").addEventListener("click",function(){h("west")}),document.getElementById("newGameButton").addEventListener("click",function(){b()}),document.addEventListener("keyup",function(e){switch(e.preventDefault(),e.code){case"ArrowUp":h("north");break;case"ArrowDown":h("south");break;case"ArrowRight":h("east");break;case"ArrowLeft":h("west")}}),document.addEventListener("keydown",function(e){e.preventDefault()})})},function(e,n,t){e.exports=t(1)}]));