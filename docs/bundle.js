!function(e,t){for(var n in t)e[n]=t[n]}(this,function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createForest=function(e){e.innerHTML="&blk12;",e.classList.add("forest")},t.createRoad=function(e){e.innerHTML="▓",e.classList.add("road")},t.createGrassland=function(e){e.innerHTML="&blk14;",e.classList.add("grassland")},t.createHouse=function(e){e.innerHTML="▄",e.classList.add("house")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cheatFunction=function(){a.wood+=1e4,h()};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));var o={x:0,y:0},a={wood:0,stick:0},i={min_x:-1,max_x:1,min_y:-1,max_y:1},d="&blk14;",c=[[!0]],s=[[{x:0,y:0}]];function l(e){for(var t=document.getElementById("map"),n='<tr id="mapRow'+e+'">',r=i.min_x;r<=i.max_x;r++)n+='<td class="mapCell" id="mapCell'+r+","+e+'">&nbsp;</td>',m(r,e);n+="</tr>",e<i.min_y?(i.min_y=e,t.insertAdjacentHTML("beforeend",n)):e>i.max_y&&(i.max_y=e,t.insertAdjacentHTML("afterbegin",n))}function u(e){for(var t=i.min_y;t<=i.max_y;t++){var n='<td class="mapCell" id="mapCell'+e+","+t+'">&nbsp;</td>';m(e,t);var r=document.getElementById("mapRow"+t);e<=i.min_x?(i.min_x=e,r.insertAdjacentHTML("afterbegin",n)):e>=i.max_x&&(i.max_x=e,r.insertAdjacentHTML("beforeend",n))}}function f(){for(var e=o.y-2;e<=o.y+2;e++)for(var t=o.x-2;t<=o.x+2;t++)if(!(e===o.y-2&&t===o.x-2||e===o.y-2&&t===o.x+2||e===o.y+2&&t===o.x-2||e===o.y+2&&t===o.x+2)){(e<i.min_y||i.max_y<e)&&l(e),(t<i.min_x||i.max_x<t)&&u(t);var n=document.getElementById("mapCell"+t+","+e);"&nbsp;"===n.innerHTML&&y(n,t,e)}}function y(e,t,n){var o=function(e,t,n){for(var r={grassland:0,forest:0,total:0,percentage_grassland:0,percentage_forest:0,road_point:!1},o=n-2;o<=n+2;o++)for(var a=t-2;a<=t+2;a++){var i=document.getElementById("mapCell"+a+","+o);null!==i&&("░"===i.innerHTML?(r.grassland++,r.total++):"▒"===i.innerHTML&&(r.forest++,r.total++));var d=s[Math.floor((a+20)/40)];d&&(d=d[Math.floor((o+20)/40)]),!r.road_point&&d&&d.x===a&&d.y===o&&(r.road_point=!0)}return r.percentage_grassland=r.grassland/r.total,r.percentage_forest=r.forest/r.total,r}(0,t,n);console.log(o.road_point),void 0!==c[t]&&!0===c[t][n]?createRoad(e):o.road_point&&Math.random()<.1?createHouse(e):Math.random()<.02?Math.random()<.5?r.createForest(e):r.createGrassland(e):Math.random()<o.percentage_grassland?r.createGrassland(e):r.createForest(e)}function m(e,t){var n={x:0,y:0};n.x=Math.floor((e+20)/40),n.y=Math.floor((t+20)/40);for(var r=n.x-1;r<=n.x+1;r++)for(var o=n.y-1;o<=n.y+1;o++)s[r]||(s[r]=[]),s[r][o]||(s[r][o]=p(r,o),v(r,o))}function p(e,t){var n={x:x(40*e-20,40*e+20),y:x(40*t-20,40*t+20)};return console.log("new road point, x: "+n.x+" y:"+n.y),n}function v(e,t){for(var n=e-1;n<=e+1;n+=2)if(s[n]&&s[n][t]){var r=s[n][t].y-s[e][t].y,o=s[n][t].x-s[e][t].x,a=r/o,i=s[e][t].y,d=s[e][t].x;if(o>=0)for(;d<=o+s[e][t].x;)c[d]||(c[d]=[]),c[d][Math.round(i)]=!0,i+=a,d++;else for(;d>=o+s[e][t].x;)c[d]||(c[d]=[]),c[d][Math.round(i)]=!0,i-=a,d--}for(var l=t-1;l<=t+1;l+=2)if(s[e]&&s[e][l]){var u=s[e][l].y-s[e][t].y,f=(s[e][l].x-s[e][t].x)/u,y=s[e][t].y,m=s[e][t].x;if(u>=0)for(;y<=u+s[e][t].y;){var p=Math.round(m);c[p]||(c[p]=[]),c[p][y]=!0,m+=f,y++}else for(;y>=u+s[e][t].y;){var v=Math.round(m);c[v]||(c[v]=[]),c[v][y]=!0,m-=f,y--}}}function x(e,t){return Math.floor(Math.random()*(t-e+1))+e}function g(e){document.getElementById("output");var t=document.getElementById("mapCell"+o.x+","+o.y);switch(t.scrollIntoView(),"░"===d?createGrassland(t):"▒"===d?createForest(t):"▓"===d?createRoad(t):"▄"===d&&createHouse(t),function(){console.log("Attempting save...");var e=[];for(var t in s)for(var n in s[t])s[t][n].quadrantX=t,s[t][n].quadrantY=n,e.push(s[t][n]);var r=[];for(var d in c)for(var l in c[d])c[d][l]&&r.push({x:d,y:l});var u={map:document.getElementById("mapWrapper").innerHTML,playerPosition:o,mapVariables:i,roadMapObjectArray:r,roadQuadrantObjectArray:e,inventory:a};try{localStorage.setItem("save",JSON.stringify(u)),console.log("Save complete!")}catch(e){console.error(e)}}(),e){case"north":o.y++;break;case"south":o.y--;break;case"east":o.x++;break;case"west":o.x--}b(),f(),M(),function e(){var t=document.getElementById("location");if("▓"===d)t.innerHTML="<p>Road</p>";else if("▒"===d){t.innerHTML='<p>Forest</p><button id="chopWoodButton">Chop Wood</button>';var n=document.getElementById("chopWoodButton");n.addEventListener("click",function(){a.wood++,d="░",e(),h()})}else if("░"===d)t.innerHTML="<p>Grassland</p>";else if("▄"===d){t.innerHTML='<p>House</p><button id="buySticksButton">Buy Sticks</button>';var r=document.getElementById("buySticksButton");r.addEventListener("click",function(){a.sticks+=a.wood,a.wood=0,h()})}}()}function M(){var e=document.getElementById("mapCell"+o.x+","+o.y);d=e.innerHTML,e.innerHTML="&Uuml;",e.classList=["mapCell"]}function b(){document.getElementById("coordinates").innerHTML="<p>("+o.x+", "+o.y+")</p>"}function h(){var e=document.getElementById("inventory");e.innerHTML="<p>Inventory</p>",a.wood>0&&(e.innerHTML+="<p>Wood x"+a.wood+"</p>"),a.sticks>0&&(e.innerHTML+="<p>Stick x"+a.sticks+"</p>")}document.addEventListener("DOMContentLoaded",function(e){console.log("document loaded"),function(){console.log("Loading game...");try{var e=JSON.parse(localStorage.getItem("save"));if(console.log("Loading complete..."),void 0!==e){if(void 0!==e.playerPosition&&(o=e.playerPosition),void 0!==e.map&&(document.getElementById("mapWrapper").innerHTML=e.map),void 0!==e.roadMapObjectArray){var t=!0,n=!1,r=void 0;try{for(var d,l=e.roadMapObjectArray[Symbol.iterator]();!(t=(d=l.next()).done);t=!0){var u=d.value;void 0===c[u.x]&&(c[u.x]=[]),c[u.x][u.y]=!0}}catch(e){n=!0,r=e}finally{try{!t&&l.return&&l.return()}finally{if(n)throw r}}}if(void 0!==e.roadQuadrantObjectArray){var f=!0,y=!1,m=void 0;try{for(var p,v=e.roadQuadrantObjectArray[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var x=p.value;void 0===s[x.quadrantX]&&(s[x.quadrantX]=[]),s[x.quadrantX][x.quadrantY]={x:x.x,y:x.y}}}catch(e){y=!0,m=e}finally{try{!f&&v.return&&v.return()}finally{if(y)throw m}}}return void 0!==e.mapVariables&&(i=e.mapVariables),void 0!==e.inventory&&(a=e.inventory),!0}}catch(e){console.error(e)}}(),h(),b(),f(),M(),document.getElementById("northButton").addEventListener("click",function(){g("north")}),document.getElementById("southButton").addEventListener("click",function(){g("south")}),document.getElementById("eastButton").addEventListener("click",function(){g("east")}),document.getElementById("westButton").addEventListener("click",function(){g("west")}),document.addEventListener("keydown",function(e){switch(e.preventDefault(),e.code){case"ArrowUp":g("north");break;case"ArrowDown":g("south");break;case"ArrowRight":g("east");break;case"ArrowLeft":g("west")}})})},function(e,t,n){e.exports=n(1)}]));